/**
 * @author      OA Wu <comdan66@gmail.com>
 * @copyright   Copyright (c) 2014 OA Wu Design
 */

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-46121102-4', 'ioa.tw');
ga('send', 'pageview');

var showAlert=function(t,e,o,i){return($dialog=$("body").children("#_alert")).length||($dialog=$("<div />").attr("id","_alert").appendTo($("body")).OA_Dialog({openEffect:"explode",closeEffect:"explode"})),t="undefined"==typeof t?"":t,e="undefined"==typeof e?"":e,o="undefined"==typeof o?function(){}:o,i="undefined"==typeof i?!0:i,$dialog.OA_Dialog("option","title",t).OA_Dialog("option","content",e).OA_Dialog("option","buttons",{"確定":o}),i&&$dialog.OA_Dialog("open"),$dialog},showWait=function(t,e,o){return($dialog=$("body").children("#_wait")).length||($dialog=$("<div />").attr("id","_wait").appendTo($("body")).OA_Dialog({openEffect:"explode",closeEffect:"explode"})),t="undefined"==typeof t?"":t,e="undefined"==typeof e?"":e,o="undefined"==typeof o?!0:o,$dialog.OA_Dialog("option","title",t).OA_Dialog("option","content",e),o&&$dialog.OA_Dialog("open"),$dialog},showConfirm=function(t,e,o,i,n){($dialog=$("body").children("#_confirm")).length||($dialog=$("<div />").attr("id","_confirm").appendTo($("body")).OA_Dialog({openEffect:"explode",closeEffect:"explode"})),t="undefined"==typeof t?"Title":t,e="undefined"==typeof e?"Content":e,o="undefined"==typeof o?function(){}:o,i="undefined"==typeof i?function(){}:i,n="undefined"==typeof n?!0:n;var a=$.Callbacks();return a.add(i),a.add(function(){$(this).OA_Dialog("close")}),$dialog.OA_Dialog("option","title",t).OA_Dialog("option","content",e).OA_Dialog("option","buttons",{"取消":a.fire,"確定":o}),n&&$dialog.OA_Dialog("open"),$dialog},ajaxError=function(){},base_url=function(){params=new Array;for(var t=0;t<arguments.length;t++)params.push(arguments[t]);return params.unshift("http://"+document.domain),jQuery.map(params,function(t){return 0!=t.length?t:null}).join("/")},sprintf=function(){for(var t,e,o,i,n,a=0,r=arguments[a++],s=[],l="";r;){if(e=/^[^\x25]+/.exec(r))s.push(e[0]);else if(e=/^\x25{2}/.exec(r))s.push("%");else{if(!(e=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(r)))throw"Huh ?!";if(null==(t=arguments[e[1]||a++])||void 0==t)throw"Too few arguments.";if(/[^s]/.test(e[7])&&"number"!=typeof t)throw"Expecting number but found "+typeof t;switch(e[7]){case"b":t=t.toString(2);break;case"c":t=String.fromCharCode(t);break;case"d":t=parseInt(t);break;case"e":t=e[6]?t.toExponential(e[6]):t.toExponential();break;case"f":t=e[6]?parseFloat(t).toFixed(e[6]):parseFloat(t);break;case"o":t=t.toString(8);break;case"s":t=(t=String(t))&&e[6]?t.substring(0,e[6]):t;break;case"u":t=Math.abs(t);break;case"x":t=t.toString(16);break;case"X":t=t.toString(16).toUpperCase()}t=/[def]/.test(e[7])&&e[2]&&t>=0?"+"+t:t,i=e[3]?"0"==e[3]?"0":e[3].charAt(1):" ",n=e[5]-String(t).length-l.length,o=e[5]?str_repeat(i,n):"",s.push(l+(e[4]?t+o:o+t))}r=r.substring(e[0].length)}return s.join("")},conv_time_unit=function(t){var e=1e3*t,o=Math.floor(e/864e5),i=e%864e5,n=Math.floor(i/36e5),a=i%36e5,r=Math.floor(a/6e4),s=a%6e4,l=Math.round(s/1e3);return o+"天 "+n+"小時 "+r+" 分鐘"+l+" 秒"};$.fn.countdown=function(t,e,o){if(e>0){o=o||"";var i=$(this[0]).html(sprintf(o,conv_time_unit(e))),n=setInterval(function(){--e?i.html(sprintf(o,conv_time_unit(e))):(clearInterval(n),t.call(i))},1e3)}else t.call($(this[0]))};var redirect=function(){this.html(this.data("message"))};$(function(){$(".jqui_tooltip").tooltip({track:!0,position:{my:"left+10 top+10"},show:{effect:"fade",delay:150},content:function(){return $(this).data("pic")?$("<img />").css({width:"500px"}).attr("src",$(this).attr("title")):$(this).attr("title")}});var t=parseFloat($("#container").width())+parseFloat($("#container").css("border-top-width"))+parseFloat($("#container").css("border-bottom-width")),e=$("nav.navbar").css({width:t+"px"}),o=parseFloat(e.height())+parseFloat(e.css("border-top-width"))+parseFloat(e.css("border-bottom-width"))+parseFloat(e.css("margin-bottom"))+parseFloat(e.css("margin-top"));$("#container").css({"padding-top":o+"px"}),$(window).resize(function(){e.css(parseFloat($(this).width())<t?{position:"absolute",left:"0px","margin-left":"0px"}:{position:"fixed",left:"50%","margin-left":0-t/2+"px"})}).resize();var i=parseFloat($("#visit_menu").hide().css("margin-top")),n=parseFloat($("#visit_menu").css("height"));$("#visit_menu").css({"margin-top":0-n+i+"px"}),e.css({top:0-o+"px"}).stop().animate({top:"0px"},500,function(){$("#visit_menu").show().animate({"margin-top":i+"px"})}),$("div.bs-sidebar ul.list-group li.list-group-item.pointer").click(function(){window.location.assign($(this).data("url"))}).each(function(){-1!=window.location.href.indexOf($(this).data("url"))&&$(this).addClass("active")}),$("#nav_bar_myself_picture span").imgLiquid({verticalAlign:"top"}),$(".fancybox").fancybox({padding:0,helpers:{overlay:{locked:!1},title:{type:"over"}}}),$("#reciprocal").countdown(redirect,$("#reciprocal").data("duration"),$("#reciprocal").data("format"))});